{% extends 'base.html' %}

{% load static %}

{% block stylesheet %}
  <link rel="stylesheet" href="{% static 'css/account.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.css' %}"/>

{% endblock %}


{% block body %}
  <div class="container">
    <h1 class="text-center logo my-4">
      <a href="{% url 'home' %}">MyHeapUnderFlow</a>
    </h1>
    <div class="row justify-content-center">
      <div class="col-lg-8 col-md-10 col-sm-12">
        <div class="card">
          <div class="card-body">
            <h3 class="card-title">Sign up</h3>
            <div class="alert alert-danger pass_mismatch"style="display:none" role="alert">
            Passwords Must Match
            </div>
              {%if error_message%}
               <div class="alert alert-danger pass_mismatch" role="alert">
              {{ error_message }}
               </div>
              {% endif %}
            <form method="post" action="{% url 'signup' %}" class="signup-form">
              {% csrf_token %}
              <label class="col-sm-10 col-form-label col-md-10">Username</label>
                  <div class="col-sm-10">
                    <input type="text" class="form-control required" name='username'required>
                  </div>
              <label  class="col-sm-10 col-form-label col-md-10">Email</label>
                  <div class="col-sm-10">
                    <input type="email" class="form-control required" name='email'required>
                  </div>
              <label class="col-sm-10 col-form-label col-md-10">First Name</label>
                  <div class="col-sm-10">
                    <input type="text" class="form-control required" name='first_name'required>
                  </div>
              <label class="col-sm-10 col-form-label col-md-10 ">Last Name</label>
                  <div class="col-sm-10">
                    <input type="text" class="form-control required" name='last_name' required>
                  </div>
              <label class="col-sm-10 col-form-label col-md-10 ">Password</label>
                  <div class="col-sm-10">
                    <input type="password" class="form-control  pass1" name='password1' required>
                  </div>
              <label class="col-sm-10 col-form-label col-md-10 col-md-10">Confirmation</label>
                  <div class="col-sm-10">
                    <input type="password" class="form-control  pass2" name='password2'required>
                  </div>
     <button type="submit" class="btn btn-primary btn-block mt-3 pass_mismatch_btn">Create an account</button>
            </form>
          </div>
          </div>
          <div class="card-footer text-muted text-center mb-2">
            Already have an account? <a href="{%url 'login'%}">Log in</a>
          </div>
        </div>
      </div>    </div>
  </div>
  <div class="container result-success" style="display:none;">
    <div class="row">
      <h3 class="text-primary"> Account Has Been Successfully Created </h3>
      <a class="btn btn-success" href="{% url 'home' %}">
      Back Home
      </a>
    </div>
  </div>
{% endblock %}
{% block scripts %}
<script>
  $(document).ready(function(){
    $('.pass_mismatch_btn').on('click', function(e){
      var pass1 = $('.pass1').val()
      var pass2 =  $('.pass2').val()
      if (pass1 != pass2){
        $('.pass_mismatch').fadeIn('slow');
        e.preventDefault();
      }
    })
  })
</script>
{% endblock scripts %}